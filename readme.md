# Проект сортировки электронной почты

Этот проект предназначен для получения, хранения и управления электронными письмами из почтового ящика mail.ru с использованием Python и SQLite.

## Возможности

- Получение писем из почтового ящика mail.ru через IMAP
- Сохранение писем в базу данных SQLite
- Категоризация писем
- Поиск писем по различным критериям
- Статистика по письмам

## Структура проекта

- `mail_to_json.py` - скрипт для получения писем с mail.ru и сохранения их в JSON
- `create_database.py` - скрипт для создания базы данных SQLite
- `email_manager.py` - класс для управления письмами в базе данных
- `.env` - файл с учетными данными (не включен в репозиторий)
- `email_database.db` - файл базы данных SQLite (создается автоматически)

## Установка и настройка

1. Создайте виртуальное окружение Python:
   ```
   python -m venv venv
   ```

2. Активируйте виртуальное окружение:
   - Windows: `venv\Scripts\activate`
   - Linux/Mac: `source venv/bin/activate`

3. Установите необходимые зависимости:
   ```
   pip install python-dotenv
   ```

4. Создайте файл `.env` с учетными данными:
   ```
   EMAIL_RU=ваш_email@mail.ru
   PASSWORD_RU=ваш_пароль_приложения
   ```

   **Важно**: Для mail.ru требуется использовать специальный пароль приложения, а не обычный пароль от аккаунта. Его можно создать в настройках безопасности вашего аккаунта mail.ru.

## Использование

### Получение писем из почтового ящика

```
python mail_to_json.py
```

Этот скрипт подключится к вашему почтовому ящику, получит письма и сохранит их в файл `emails_data.json`.

### Создание базы данных

```
python create_database.py
```

Этот скрипт создаст базу данных SQLite с необходимыми таблицами и импортирует данные из JSON файла (если он существует).

### Управление письмами

```
python email_manager.py
```

Этот скрипт предоставляет интерфейс для работы с письмами в базе данных.

## Структура базы данных

### Таблица `emails`

- `id` - уникальный идентификатор письма в базе данных
- `email_id` - идентификатор письма на сервере
- `subject` - тема письма
- `sender` - отправитель
- `date` - дата отправки
- `date_received` - дата получения
- `body` - тело письма
- `is_processed` - флаг обработки (0 - не обработано, 1 - обработано)

### Таблица `attachments`

- `id` - уникальный идентификатор вложения
- `email_id` - идентификатор письма
- `filename` - имя файла
- `content_type` - тип содержимого
- `data` - данные вложения

### Таблица `categories`

- `id` - уникальный идентификатор категории
- `name` - название категории
- `description` - описание категории

### Таблица `email_categories`

- `email_id` - идентификатор письма
- `category_id` - идентификатор категории

## Дальнейшее развитие

- Добавление веб-интерфейса для управления письмами
- Автоматическая категоризация писем с использованием машинного обучения
- Интеграция с другими почтовыми сервисами (Gmail, Yandex и т.д.)
- Добавление возможности отправки писем
- Экспорт данных в различные форматы

## Запуск FastAPI сервера
```bash
 uvicorn test1:app --reload
```
## промты
```
Сделай дизайн главной страницы index1.html в соответствии с https://i.pinimg.com/736x/4f/8b/92/4f8b9243e449ca39b391d867ba4a0e21.jpg
Для сортировки писем по электронным ящикам.

Измени боковую панель с разделами для почтовых ящиков:
 в боковой панели выведи почтовые ящики с которых собраны письма
 при нажатии на конкретный почтовый ящик отображаются письма присланные на него.

Сделай кликабельными письма на index1.html, создай файл detail.html для отображения содержимого письма

```